
> orderzap-backend@1.0.0 dev
> tsx watch src/index.ts

DB Config: {
  host: 'localhost',
  port: '5432',
  database: 'orderzap',
  user: 'orderzap_user',
  password: '***'
}
2026-02-02 05:11:31 [[32minfo[39m]: Convex client initialized
2026-02-02 05:11:31 [[32minfo[39m]: Testing database connection...
2026-02-02 05:11:31 [[32minfo[39m]: Convex API loaded successfully
2026-02-02 05:11:31 [[32minfo[39m]: New PostgreSQL client connected
2026-02-02 05:11:31 [[32minfo[39m]: PostgreSQL connection test successful
2026-02-02 05:11:31 [[32minfo[39m]: Database connection successful, starting server...
2026-02-02 05:11:31 [[32minfo[39m]: üöÄ OrderZap Backend started on port 3002
2026-02-02 05:11:31 [[32minfo[39m]: üìä Health check: http://localhost:3002/health
2026-02-02 05:11:31 [[32minfo[39m]: üìù API endpoint: http://localhost:3002/api/orders
2026-02-02 05:11:31 [[32minfo[39m]: üóÑÔ∏è  Database: Connected to PostgreSQL
2026-02-02 05:11:31 [[32minfo[39m]: ‚ö° Realtime: Convex integration active
2026-02-02 05:11:32 [[32minfo[39m]: Incoming request
{
  "method": "GET",
  "path": "/health",
  "ip": "127.0.0.1"
}
2026-02-02 05:11:33 [[32minfo[39m]: Incoming request
{
  "method": "GET",
  "path": "/health",
  "ip": "127.0.0.1"
}
2026-02-02 05:11:33 [[32minfo[39m]: Incoming request
{
  "method": "POST",
  "path": "/api/orders",
  "ip": "127.0.0.1"
}
2026-02-02 05:11:33 [[32minfo[39m]: Creating order
{
  "restaurantId": "550e8400-e29b-41d4-a716-446655440000",
  "itemCount": 1
}
2026-02-02 05:11:33 [[32minfo[39m]: üîç POSTGRES RETURNED ORDER
{
  "orderId": "73ece35b-cd54-403a-949d-945519a66980",
  "cancellation_reason_value": null,
  "cancellation_reason_type": "object",
  "cancellation_reason_is_null": true,
  "cancellation_reason_is_undefined": false,
  "all_keys": [
    "id",
    "restaurant_id",
    "table_id",
    "order_number",
    "customer_name",
    "customer_phone",
    "customer_session_id",
    "status",
    "subtotal",
    "tax_amount",
    "tip_amount",
    "discount_amount",
    "deposit_used",
    "total_amount",
    "payment_method",
    "payment_status",
    "payment_transaction_id",
    "notes",
    "special_instructions",
    "estimated_ready_time",
    "completed_at",
    "cancelled_at",
    "cancellation_reason",
    "created_at",
    "updated_at",
    "deleted_at"
  ]
}
2026-02-02 05:11:33 [[32minfo[39m]: Order created successfully
{
  "orderId": "73ece35b-cd54-403a-949d-945519a66980",
  "orderNumber": "ORD-2026-02-02-0005"
}
2026-02-02 05:11:35 [[31merror[39m]: Convex order sync failed (attempt 1/3)
{
  "entityId": "73ece35b-cd54-403a-949d-945519a66980",
  "error": "[Request ID: 4bd7c059a04053de] Server Error\nCould not find public function for 'orders:upsertOrder'. Did you forget to run `npx convex dev` or `npx convex deploy`?\n"
}
2026-02-02 05:11:37 [[31merror[39m]: Convex order sync failed (attempt 2/3)
{
  "entityId": "73ece35b-cd54-403a-949d-945519a66980",
  "error": "[Request ID: b921e45143f340c8] Server Error\nCould not find public function for 'orders:upsertOrder'. Did you forget to run `npx convex dev` or `npx convex deploy`?\n"
}
2026-02-02 05:11:39 [[31merror[39m]: Convex order sync failed (attempt 3/3)
{
  "entityId": "73ece35b-cd54-403a-949d-945519a66980",
  "error": "[Request ID: b4fa1757fc3202f1] Server Error\nCould not find public function for 'orders:upsertOrder'. Did you forget to run `npx convex dev` or `npx convex deploy`?\n"
}
2026-02-02 05:11:39 [[31merror[39m]: Convex sync failed
{
  "orderId": "73ece35b-cd54-403a-949d-945519a66980",
  "error": "[Request ID: b4fa1757fc3202f1] Server Error\nCould not find public function for 'orders:upsertOrder'. Did you forget to run `npx convex dev` or `npx convex deploy`?\n"
}
2026-02-02 05:12:03 [[32minfo[39m]: PostgreSQL client removed from pool
